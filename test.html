<!DOCTYPE html>

<html lang="zh-TW">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>æ–—å°ç¾è¡“ç­å…¥å­¸è€ƒé»‘æ¿è¨Šæ¯å±•ç¤º</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }

        .blackboard {
            background-color: #0f2c1e;
            background-image:A
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
            background-position: -1px -1px, -1px -1px, -1px -1px, -1px -1px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5) inset;
            border: 15px solid #5d4037;
            position: relative;
            height: 100vh;
            width: 100vw;
            overflow: auto;
        }

        .blackboard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='transparent'/%3E%3Cpath d='M0 0L100 100M100 0L0 100' stroke='rgba(255,255,255,0.03)' stroke-width='0.5'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }

        .chalk-text {
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.4);
            font-family: 'ComicFont', 'Comic Sans MS', 'Chalkboard SE', cursive;
        }

        .clock {
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        select, .number-display {
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        select option {
            background-color: white;
            color: #333;
        }
		
        /* ä¿®å¾©ä¸‹æ‹‰é¸å–®é¡è‰²å•é¡Œ */
        select option {
            background-color: white;
            color: #333;
        }
        
        .btn {
            @apply px-2 py-1 rounded-md transition-all duration-200;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .content-area {
            position: relative;
            z-index: 1;
        }
        
        .time-row {
            position: relative;
        }
        
        .time-row::after {
            content: '';
            position: absolute;
            left: 10%;
            right: 10%;
            bottom: 0;
            height: 1px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .time-row:last-child::after {
            display: none;
        }
        
        .active-exam {
            background-color: rgba(255, 0, 0, 0.2);
            border-color: rgba(255, 0, 0, 0.5);
        }
        
        .time-separator {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            padding: 0 0.5rem;
        }
        
        #examStatus {
            font-size: 2.5rem;
            padding: 0.5rem 1.5rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .faded {
            opacity: 0.2;
            transition: opacity 0.3s ease;
        }
        
        /* ç¸®å°è¡Œè· */
        .compact-row {
            margin-bottom: 0.5rem !important;
            padding-bottom: 0.5rem !important;
        }
        
        .compact-input {
            padding-top: 0.5rem !important;
            padding-bottom: 0.5rem !important;
        }
		
		/*ä¸Šå‚³å­—å‹*/
		@font-face {
		  font-family: 'ComicFont';
		  src: url('https://raw.githubusercontent.com/dong1121/JavaScript/main/fonts/comic.ttf') format('truetype');
		  font-weight: normal;
		  font-style: normal;
		  font-display: swap;
		}
    </style>
</head>
<body>
<div class="blackboard">
<div class="content-area p-4 md:p-6">
<div class="text-center mb-0">
<h2 class="text-xl md:text-2xl text-white chalk-text mb-2">ç¾åœ¨æ™‚é–“</h2>
<div class="clock text-7xl md:text-9xl font-bold chalk-text mb-3" id="clock">--:--:--</div>
<div class="text-3xl md:text-4xl font-bold text-center py-2 px-6 rounded-lg bg-black bg-opacity-40 chalk-text inline-block" id="examStatus">å°šæœªé–‹å§‹è€ƒè©¦</div>
<div class="text-center mt-2">
  <button id="enableAudioBtn" onclick="enableAudio()" class="btn bg-yellow-500 text-black hover:bg-yellow-600 text-lg font-bold px-4 py-2 rounded-lg">
    ğŸµ æŒ‰æˆ‘å•Ÿç”¨é˜è²æ’­æ”¾
  </button>
</div>
<div style="font-family: 'ComicFont', sans-serif; font-size: 30px; margin-top: 20px;">
  é€™æ®µæ–‡å­—æ‡‰è©²ç”¨ GitHub è¼‰å…¥çš„ ComicFont å­—å‹é¡¯ç¤º
</div>
</div>
<!-- å·¦å´ï¼šè€ƒè©¦ç§‘ç›®èˆ‡æ™‚é–“ -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
<div class="bg-black bg-opacity-30 rounded-lg p-4 shadow-md" id="scheduleArea">
<!-- ä¸‰åˆ—ç§‘ç›®èˆ‡æ™‚é–“è¨­å®š -->
<div class="time-row compact-row mb-2 pb-2">
<div class="flex items-center mb-1">
<div class="w-1/4 pr-2 text-lg chalk-text text-center">å‰µæ„ç·šç•«</div>
<div class="w-3/4 flex items-center">
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="08:00" id="startTime1" type="text" value="08:00"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("startTime1", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("startTime1", -5)'>-</button>
</div>
</div>
<span class="time-separator">ï½</span>
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="08:50" id="endTime1" type="text" value="08:50"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("endTime1", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("endTime1", -5)'>-</button>
</div>
</div>
</div>
</div>
</div>
<div class="time-row compact-row mb-2 pb-2">
<div class="flex items-center mb-1">
<div class="w-1/4 pr-2 text-lg chalk-text text-center">å½©ç•«</div>
<div class="w-3/4 flex items-center">
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="09:00" id="startTime2" type="text" value="09:00"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("startTime2", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("startTime2", -5)'>-</button>
</div>
</div>
<span class="time-separator">ï½</span>
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="10:30" id="endTime2" type="text" value="10:30"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("endTime2", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("endTime2", -5)'>-</button>
</div>
</div>
</div>
</div>
</div>
<div class="time-row compact-row mb-2 pb-2">
<div class="flex items-center mb-1">
<div class="w-1/4 pr-2 text-lg chalk-text text-center">ç«‹é«”é€ å½¢</div>
<div class="w-3/4 flex items-center">
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="10:40" id="startTime3" type="text" value="10:40"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("startTime3", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("startTime3", -5)'>-</button>
</div>
</div>
<span class="time-separator">ï½</span>
<div class="flex-1 flex items-center">
<input class="w-full compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 chalk-text text-2xl" data-default="12:00" id="endTime3" type="text" value="12:00"/>
<div class="flex flex-col ml-1">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick='adjustSingleTime("endTime3", 5)'>+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick='adjustSingleTime("endTime3", -5)'>-</button>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- å³å´ï¼šæ‡‰è€ƒäººæ•¸ -->
<div class="bg-black bg-opacity-30 rounded-lg p-4 shadow-md">
<div class="mb-3 flex items-center">
<label class="text-lg chalk-text w-1/4">æ‡‰åˆ°äººæ•¸</label>
<div class="flex items-center w-3/4">
<div class="flex-grow compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center font-bold chalk-text text-2xl" id="totalStudents">11</div>
<div class="ml-2 flex flex-col">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick="adjustNumber('totalStudents', 1)">+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick="adjustNumber('totalStudents', -1)">-</button>
</div>
</div>
</div>
<div class="mb-3 flex items-center">
<label class="text-lg chalk-text w-1/4">ç¼ºå¸­äººæ•¸</label>
<div class="flex items-center w-3/4">
<div class="flex-grow compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center font-bold chalk-text text-2xl" id="absentStudents">0</div>
<div class="ml-2 flex flex-col">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" onclick="adjustNumber('absentStudents', 1)">+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" onclick="adjustNumber('absentStudents', -1)">-</button>
</div>
</div>
</div>
<div class="mb-3 flex items-center">
<label class="text-lg chalk-text w-1/4">å¯¦åˆ°äººæ•¸</label>
<div class="flex items-center w-3/4">
<div class="flex-grow compact-input p-2 bg-black bg-opacity-30 border border-gray-600 rounded-lg text-lg text-center font-bold chalk-text text-2xl" id="presentStudents">11</div>
<div class="ml-2 flex flex-col opacity-5">
<button class="btn bg-blue-600 text-white hover:bg-blue-700 mb-1 text-sm" disabled="" onclick="adjustNumber('classroomStudents', 1)">+</button>
<button class="btn bg-blue-600 text-white hover:bg-blue-700 text-sm" disabled="" onclick="adjustNumber('classroomStudents', -1)">-</button>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script>
function updateClock() {
    const now = new Date();
    const h = String(now.getHours()).padStart(2, '0');
    const m = String(now.getMinutes()).padStart(2, '0');
    const s = String(now.getSeconds()).padStart(2, '0');
    document.getElementById('clock').textContent = `${h}:${m}:${s}`;
    checkExamStatus(now);
    setTimeout(updateClock, 1000);
}

let lastExamStatus = ""; // åœ¨ checkExamStatus å¤–å±¤å®£å‘Šä¸€æ¬¡å³å¯

function checkExamStatus(now) {
    const currentHour = now.getHours();
    const currentMinute = now.getMinutes();
    const currentTime = currentHour * 60 + currentMinute;
    
    
const examTimes = [
    { subject: "å‰µæ„ç·šç•«", startInput: "startTime1", endInput: "endTime1" },
    { subject: "å½©ç•«", startInput: "startTime2", endInput: "endTime2" },
    { subject: "ç«‹é«”é€ å½¢", startInput: "startTime3", endInput: "endTime3" }
].map(exam => {
    const startParts = document.getElementById(exam.startInput).value.split(':').map(Number);
    const endParts = document.getElementById(exam.endInput).value.split(':').map(Number);
    return {
        subject: exam.subject,
        start: startParts[0] * 60 + startParts[1],
        end: endParts[0] * 60 + endParts[1]
    };
});
/*

        { subject: "å‰µæ„ç·šç•«", start: 8 * 60 + 0, end: 8 * 60 + 50 },
        { subject: "å½©ç•«", start: 9 * 60 + 0, end: 10 * 60 + 30 },
        { subject: "ç«‹é«”é€ å½¢", start: 14 * 60 + 57, end: 14 * 60 + 58 }
    ];
*/
    
    let status = "å°šæœªé–‹å§‹è€ƒè©¦";
    let statusClass = ["bg-black", "bg-opacity-40"];
    
    for (let i = 0; i < examTimes.length; i++) {
        const exam = examTimes[i];
        if (currentTime >= exam.start - 5 && currentTime < exam.start) {
			status = `${exam.subject} è€ƒè©¦å³å°‡é–‹å§‹`;
			statusClass = ["bg-blue-700", "bg-opacity-50", "text-blue-200"];
			break;
		} else if (currentTime >= exam.start && currentTime < exam.end) {
            status = `æ­£åœ¨é€²è¡Œ ${exam.subject} è€ƒè©¦`;
            statusClass = ["bg-red-900", "bg-opacity-50", "text-red-300"];
            break;
        } else if (currentTime >= exam.end && currentTime < exam.end + 5) {
            status = `${exam.subject} è€ƒè©¦çµæŸ`;
            statusClass = ["bg-yellow-800", "bg-opacity-50", "text-yellow-200"];
            break;
        }
    }
	
    // æ’­æ”¾æç¤ºéŸ³ï¼ˆåªåœ¨ç‹€æ…‹æ”¹è®Šæ™‚æ’­æ”¾ï¼‰
    if (status !== lastExamStatus) {
        if (audioEnabled) {
			if (status.includes("å³å°‡é–‹å§‹")) {
				document.getElementById("prepBell").play();
			} else if (status.includes("é€²è¡Œ") || status.includes("çµæŸ")) {
				document.getElementById("schoolBell").play();
			}
		}
        lastExamStatus = status;
    }
    
    const examStatus = document.getElementById("examStatus");
    examStatus.textContent = status;
    examStatus.className = "text-3xl md:text-4xl font-bold text-center py-2 px-6 rounded-lg chalk-text inline-block " + statusClass.join(" ");
}

function adjustNumber(id, delta) {
    const el = document.getElementById(id);
    let val = parseInt(el.textContent) || 0;
    val = Math.max(0, val + delta);
    if (id === 'absentStudents') {
        const total = parseInt(document.getElementById('totalStudents').textContent) || 0;
        val = Math.min(val, total);
    }
    el.textContent = val;
    updatePresentStudents();
}

function updatePresentStudents() {
    const total = parseInt(document.getElementById('totalStudents').textContent) || 0;
    const absent = parseInt(document.getElementById('absentStudents').textContent) || 0;
    const present = Math.max(0, total - absent);
    document.getElementById('presentStudents').textContent = present;
}

document.addEventListener('DOMContentLoaded', () => {
    updateClock();
});


function adjustSingleTime(timeId, minutes) {
    const timeInput = document.getElementById(timeId);
    const [hour, minute] = timeInput.value.split(':').map(Number);
    let newMinutes = hour * 60 + minute + minutes;
    newMinutes = Math.max(0, Math.min(23 * 60 + 59, newMinutes));
    const newHour = Math.floor(newMinutes / 60);
    const newMinute = newMinutes % 60;
    timeInput.value = `${String(newHour).padStart(2, '0')}:${String(newMinute).padStart(2, '0')}`;
    checkExamStatus(new Date());
}

//å•Ÿç”¨é˜è²æ’­æ”¾
let audioEnabled = false;

function enableAudio() {
    const prepBell = document.getElementById("prepBell");
    const schoolBell = document.getElementById("schoolBell");

    // å˜—è©¦æ’­æ”¾èˆ‡ç«‹å³æš«åœï¼ˆå–å¾—ä½¿ç”¨è€…äº’å‹•æˆæ¬Šï¼‰
    prepBell.play().then(() => prepBell.pause());
    schoolBell.play().then(() => schoolBell.pause());

    audioEnabled = true;

    // éš±è—æŒ‰éˆ•
    const btn = document.getElementById("enableAudioBtn");
    if (btn) {
        btn.disabled = true;
        btn.style.display = 'none';
    }
}
</script>
<audio id="prepBell" preload="auto" src="preparation_bell.mp3"></audio>
<audio id="schoolBell" preload="auto" src="school_bell.mp3"></audio>
</body>
</html>
